# validate-links-sts.sh

## Name

`validate-links-sts.sh`

Validates links to "Stadtteilschulen" (StS) at <https://gest-hamburg.de/stadtteilschulen/>.

## Synopsis

```bash
validate-links-sts.sh [-?|-h] [-f <file>]
```

## Description

The `validate-links-sts.sh` script checks the validity of links within a
specific table on the "Stadtteilschulen" page of the GEST Hamburg website. It
extracts links from a table with the ID `tablepress-stadtteilschulen` and
validates each link by checking its HTTP status code, effective URL (in case of
redirects), and the title of the page it points to.

### Options

- `-?|-h`: Show the help message.
- `-f <file>`: File to write the CSV output to ('-' for STDOUT; the default).

### Tips

**HTML Output:** If your target file has the extension `.html` a HTML document
is created instead. Same as for the CSV file, applications such as Excel are
able to open this file and the contained table.

It may be easier to use this HTML table as input to Excel, sparing some extra
import steps, then doing so with a CSV file.

### Functionality

1. **Initialization**: Sets up necessary variables and sources common functions.
2. **Link Extraction**: Extracts links from the specified table on the webpage.
3. **Link Validation**: For each link, it checks the HTTP status code, follows
   redirects to get the effective URL, and retrieves the page title.
4. **CSV Output**: Outputs the results in CSV format, including URL, status
   code, effective URL, and title.

### Importing Data into Excel

To ensure the CSV data is correctly imported into Excel, follow these steps:

1. Open Excel.
2. Go to the `Data` tab.
3. Click on `From Text/CSV`.
4. Select the CSV file generated by the script.
5. In the import wizard, ensure the delimiter is set to a semicolon (`;`).
6. Validate the column-types (most should be regarded as text values).
7. Confirm the data preview looks correct and click `Load`.

### Example

#### Command

```bash
validate-links-sts.sh -f results.csv
```

#### Example Output

```csv
URL;Status;Effective URL;Title
"https://example.com/?id=http_ok";200;"https://example.com/?id=http_ok";"Example OK"
"https://example.com/?id=redirected-source";301;"https://example.com/?id=redirected-target";"Example Redirected"
"https://example.com/?id=not-found";404;"https://example.com/?id=not-found";"Not Found"
```

### Required Tools

The script requires the following tools:

- `curl`
- `sed`

#### Installation

To install the required tools, run:

```bash
sudo apt install curl sed
```
